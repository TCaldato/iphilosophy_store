{% extends "base.html" %}
{% load static %}
{% block page_header %}
<div class="container header-container">
	<div class="row">
		<div class="col"></div>
	</div>
</div>
{% endblock %}
{% block content %}
<div class="overlay"></div>
<div class="container mb-2">
	<div class="row">
		<div class="col">
			<hr>
			<h2 class="logo-font mb-4">My Wishlist</h2>
			<hr>
		</div>
	</div>
	{% if wishlist.products.all %}
	<div class="table-responsive rounded">
		<table class="table table-sm table-borderless">
			<thead>
				<tr>
					<th scope="col">Image</th>
					<th scope="col">Product</th>
					<th scope="col">Price</th>
					<th scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>
				{% for product in wishlist.products.all %}
				<tr>
					<td class="align-middle">
						<!-- Adding image for the product-->
						{% if product.image %}
						<img src="{{ product.image.url }}" alt="{{ product.name }}" style="height: 50px;">
						{% else %}
						<img src="{% static 'no_image_available.png' %}" alt="No Image Available" style="height: 50px;">
						{% endif %}
					</td>
					<td class="align-middle p-3">
						{{ product.name }}
					</td>
					<td class="align-middle py-3">
						R$ {{ product.price | floatformat:2 }}
					</td>
					<td class="align-middle py-3">
						<form action="{% url 'add_to_bag' product.id %}" method="POST" class="d-inline">
							{% csrf_token %}
							<input type="hidden" name="quantity" value="1">
							<input type="hidden" name="redirect_url" value="{% url 'wishlist' %}">
							<button type="submit" class="btn btn-sm btn-outline-success small">Add Bag</button>
						</form>
						<a href="{% url 'remove_from_wishlist' product.id %}" class="btn btn-sm btn-outline-danger small">Remove</a>
						<a href="{% url 'product_detail' product.id %}" class="btn btn-sm btn-outline-secondary small">Details</a>
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
	{% else %}
	<p class="lead mb-5">Your Wishlist is empty</p>
	<a href="{% url 'products' %}" class="btn btn-outline-black rounded-0 btn-lg">
	<span class="icon">
	<i class="fas fa-chevron-left"></i>
	</span>
	<span class="text-uppercase">Keeping buying</span>
	</a>
	{% endif %}
</div>
{% endblock %}
{% block postloadjs %}
{{ block.super }}
<script type="text/javascript">
	$('.btt-link').click(function(e) {
	    window.scrollTo(0,0)
	})
</script>
{% endblock %}